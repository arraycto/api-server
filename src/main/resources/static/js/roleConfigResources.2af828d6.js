(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["roleConfigResources"],{"0187":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"j",(function(){return c})),a.d(t,"h",(function(){return i})),a.d(t,"i",(function(){return u})),a.d(t,"d",(function(){return l})),a.d(t,"g",(function(){return d})),a.d(t,"f",(function(){return h})),a.d(t,"b",(function(){return R})),a.d(t,"c",(function(){return p}));a("99af");var o=a("b775"),s={list:"/sys/role/list",add:"/sys/role/add",update:"/sys/role/update",remove:"/sys/role/remove",toggleState:"/sys/role/toggle-state",detail:"/sys/role/detail",listNoResources:"/sys/role/list-no-resources",listHaveResources:"/sys/role/list-have-resources",addRoleResources:"/sys/role/add-role-resources",delRoleResources:"/sys/role/del-role-resources"};function n(e){return Object(o["b"])({url:s.list,method:"post",data:e})}function r(e){return Object(o["b"])({url:s.add,method:"post",data:e})}function c(e,t){return Object(o["b"])({url:"".concat(s.update,"/").concat(e),method:"post",data:t})}function i(e){return Object(o["b"])({url:"".concat(s.remove,"/").concat(e),method:"get"})}function u(e){return Object(o["b"])({url:"".concat(s.toggleState,"/").concat(e),method:"get"})}function l(e){return Object(o["b"])({url:"".concat(s.detail,"/").concat(e),method:"get"})}function d(e,t){return Object(o["b"])({url:"".concat(s.listNoResources,"/").concat(e),method:"post",data:t})}function h(e,t){return Object(o["b"])({url:"".concat(s.listHaveResources,"/").concat(e),method:"post",data:t})}function R(e,t){return Object(o["b"])({url:"".concat(s.addRoleResources,"/").concat(e),method:"post",data:t})}function p(e,t){return Object(o["b"])({url:"".concat(s.delRoleResources,"/").concat(e),method:"post",data:t})}},4042:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));a("d81d"),a("b64b"),a("498a");function o(e){return""===e||""===e.trim()||void 0===e||null===e}function s(e){return!o(e)}function n(e){var t={};for(var a in e)s(e[a])&&(t[a]=e[a]);return t}var r=function(){return{title:"",mode:"",visible:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:19}}},confirmLoading:!1,form:{}}}},aea4:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:8}},[a("a-col",{attrs:{xs:24,sm:24,md:8}},[a("a-card",{attrs:{size:e.defaultSize,bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:5}},[a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:24}},[e.noResources.selectedRowKeys.length>0?[e._v(" "+e._s("已选 "+e.noResources.selectedRowKeys.length+" 个资源")+" ")]:[e._v(" 选择需要添加的资源 ")]],2),a("a-col",{attrs:{xs:18}},[a("a-form-item",{attrs:{label:"资源"}},[a("a-input",{attrs:{placeholder:"输入资源筛选"},model:{value:e.noResources.query.key,callback:function(t){e.$set(e.noResources.query,"key",t)},expression:"noResources.query.key"}})],1)],1),a("a-col",{attrs:{xs:3}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{shape:"circle"},on:{click:e.noResourcesHandleSearch}},[a("a-icon",{attrs:{type:"search"}})],1)],1)]),a("a-col",{attrs:{xs:3}},[a("a-tooltip",{attrs:{title:"添加",placement:"top"}},[a("a-button",{attrs:{shape:"circle",icon:"plus",type:"primary",disabled:0===e.noResources.selectedRowKeys.length,loading:e.noResources.addBtnLoading},on:{click:e.handleAddUserRoles}})],1)],1)],1)],1)],1),a("a-table",{attrs:{bordered:!1,columns:e.noResources.columns,loading:e.noResources.loading,dataSource:e.noResources.data,pagination:e.noResources.pagination,rowSelection:{selectedRowKeys:e.noResources.selectedRowKeys,onChange:e.noResourcesOnSelectChange},rowKey:function(e){return e.id}},on:{change:e.noResourcesHandleChange},scopedSlots:e._u([{key:"id",fn:function(t,o){return a("span",{},["ON"===o.state?a("span",[e._v(e._s(t))]):a("span",{staticStyle:{color:"red"}},[e._v(e._s(t))])])}}])})],1)],1),a("a-col",{attrs:{xs:24,sm:24,md:16}},[a("a-card",{attrs:{title:e.haveResourcesTitle,bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{xs:12}},[a("a-tooltip",{attrs:{title:"移除",placement:"top"}},[a("a-button",{attrs:{shape:"circle",icon:"delete",type:"danger",disabled:0===e.haveResources.selectedRowKeys.length,loading:e.haveResources.delBtnLoading},on:{click:e.handleDelUserRoles}})],1),e.haveResources.selectedRowKeys.length>0?a("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s("已选 "+e.haveResources.selectedRowKeys.length+" 个资源")+" ")]):e._e()],1),a("a-col",{staticStyle:{"text-align":"right"},attrs:{xs:10}},[a("a-form-item",{attrs:{label:"资源"}},[a("a-input",{attrs:{placeholder:"请输入资源筛选"},model:{value:e.haveResources.query.key,callback:function(t){e.$set(e.haveResources.query,"key",t)},expression:"haveResources.query.key"}})],1)],1),a("a-col",{attrs:{xs:2}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{shape:"circle"},on:{click:e.haveResourcesHandleSearch}},[a("a-icon",{attrs:{type:"search"}})],1)],1)])],1)],1)],1),a("a-table",{attrs:{bordered:!1,columns:e.haveResources.columns,loading:e.haveResources.loading,dataSource:e.haveResources.data,rowSelection:{selectedRowKeys:e.haveResources.selectedRowKeys,onChange:e.haveResourcesOnSelectChange},pagination:e.haveResources.pagination,rowKey:function(e){return e.id}},on:{change:e.haveResourcesHandleChange},scopedSlots:e._u([{key:"id",fn:function(t,o){return a("span",{},["ON"===o.state?a("span",[e._v(e._s(t))]):a("span",{staticStyle:{color:"red"}},[e._v(e._s(t))])])}}])})],1)],1)],1)},s=[],n=(a("99af"),a("b0c0"),a("d3b7"),a("0187")),r=a("4042"),c={name:"RoleConfigResources",data:function(){return{defaultSize:"small",role:{id:"",name:"",intro:"",state:""},noResources:{loading:!1,columns:[{title:"名称",dataIndex:"name",width:"60%"},{title:"编码",dataIndex:"id",scopedSlots:{customRender:"id"}}],data:[],query:{key:""},pagination:{total:0,current:1,pageSize:8},selectedRowKeys:[],addBtnLoading:!1},haveResources:{loading:!1,columns:[{title:"名称",dataIndex:"name"},{title:"编码",dataIndex:"id",scopedSlots:{customRender:"id"}},{title:"创建人",dataIndex:"creater"},{title:"创建时间",dataIndex:"createTime"}],data:[],query:{key:""},pagination:{total:0,current:1,pageSize:5},selectedRowKeys:[],delBtnLoading:!1}}},computed:{noResourcesFilter:function(){return Object(r["b"])(this.noResources.query)},haveResourcesFilter:function(){return Object(r["b"])(this.haveResources.query)},haveResourcesTitle:function(){return"".concat(this.role.id," | ").concat(this.role.name," | ").concat("ON"===this.role.state?"启用":"禁用","  | ").concat(this.role.intro)}},created:function(){this.loadRoleInfo(),this.loadNoRolesData(),this.loadHaveRolesData()},beforeRouteLeave:function(e,t,a){a(),this.$destroy()},methods:{loadRoleInfo:function(){var e=this,t=this.$route.params.roleId;Object(n["d"])(t).then((function(t){t.status&&(e.role.id=t.data.id,e.role.name=t.data.name,e.role.intro=t.data.intro,e.role.state=t.data.state)}))},loadNoRolesData:function(){var e=this,t=this.$route.params.roleId;this.noResources.selectedRowKeys=[],this.noResources.loading=!0;var a={filter:this.noResourcesFilter,current:this.noResources.pagination.current,pageSize:this.noResources.pagination.pageSize};Object(n["g"])(t,a).then((function(t){e.noResources.data=t.data.records,e.noResources.pagination.current=t.data.current,e.noResources.pagination.total=t.data.total,e.noResources.pagination.pageSize=t.data.pageSize})).finally((function(){e.noResources.loading=!1}))},noResourcesOnSelectChange:function(e){this.noResources.selectedRowKeys=e},noResourcesHandleChange:function(e){this.noResources.pagination=e,this.loadNoRolesData()},noResourcesHandleSearch:function(){this.noResources.pagination.current=1,this.noResources.pagination.total=0,this.loadNoRolesData()},handleAddUserRoles:function(){var e=this;this.noResources.addBtnLoading=!0;var t=this.$route.params.roleId;Object(n["b"])(t,this.noResources.selectedRowKeys).then((function(t){t.status&&(e.haveResources.pagination.current=1,e.haveResources.pagination.total=0,e.loadHaveRolesData(),e.noResources.pagination.current=1,e.noResources.pagination.total=0,e.loadNoRolesData())})).finally((function(){e.noResources.addBtnLoading=!1}))},loadHaveRolesData:function(){var e=this,t=this.$route.params.roleId;this.haveResources.selectedRowKeys=[],this.haveResources.loading=!0;var a={filter:this.haveResourcesFilter,current:this.haveResources.pagination.current,pageSize:this.haveResources.pagination.pageSize};Object(n["f"])(t,a).then((function(t){e.haveResources.data=t.data.records,e.haveResources.pagination.current=t.data.current,e.haveResources.pagination.total=t.data.total,e.haveResources.pagination.pageSize=t.data.pageSize})).finally((function(){e.haveResources.loading=!1}))},haveResourcesOnSelectChange:function(e){this.haveResources.selectedRowKeys=e},haveResourcesHandleChange:function(e){this.haveResources.pagination=e,this.loadHaveRolesData()},haveResourcesHandleSearch:function(){this.haveResources.pagination.current=1,this.haveResources.pagination.total=0,this.loadHaveRolesData()},handleDelUserRoles:function(){var e=this;this.haveResources.addBtnLoading=!0;var t=this.$route.params.roleId;Object(n["c"])(t,this.haveResources.selectedRowKeys).then((function(t){t.status&&(e.noResources.pagination.current=1,e.noResources.pagination.total=0,e.loadNoRolesData(),e.haveResources.pagination.current=1,e.haveResources.pagination.total=0,e.loadHaveRolesData())})).finally((function(){e.noResources.addBtnLoading=!1}))}}},i=c,u=a("2877"),l=Object(u["a"])(i,o,s,!1,null,null,null);t["default"]=l.exports}}]);