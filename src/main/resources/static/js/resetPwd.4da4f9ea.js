(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["resetPwd"],{"05d6":function(e,t,a){},"28b0":function(e,t,a){"use strict";var r=a("05d6"),s=a.n(r);s.a},"41ea":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("a-form",{ref:"formReset",attrs:{form:e.form},on:{submit:e.handleSubmit}},[e.errorMsg?a("a-alert",{staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",showIcon:"",message:e.errorMsg}}):e._e(),a("a-form-item",{staticStyle:{"text-align":"center"}},[a("a-radio-group",{attrs:{buttonStyle:"solid"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("a-radio-button",{attrs:{value:"phone"}},[e._v("手机号")]),a("a-radio-button",{attrs:{value:"email"}},[e._v("电子邮箱")])],1)],1),"phone"===e.type?a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{validateFirst:!0,rules:[{required:!0,message:"请输入手机号"},{pattern:/^[1][3,4,5,6,7,8,9][0-9]{9}$/,message:"请输入格式正确的手机号"}],validateTrigger:"blur"}],expression:"['phone',{validateFirst: true,rules: [{ required: true, message: '请输入手机号' },\n                                                           {pattern: /^[1][3,4,5,6,7,8,9][0-9]{9}$/, message: '请输入格式正确的手机号'}], validateTrigger: 'blur'}]"}],attrs:{size:"large",placeholder:"手机号"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"phone"},slot:"prefix"})],1)],1):e._e(),"email"===e.type?a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{validateFirst:!0,rules:[{required:!0,message:"请输入邮箱"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请输入格式正确的邮箱地址"}],validateTrigger:"blur"}],expression:"['email',{validateFirst: true,rules: [{ required: true, message: '请输入邮箱' },\n                                                           {pattern: /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/, message: '请输入格式正确的邮箱地址'}], validateTrigger: 'blur'}]"}],attrs:{size:"large",placeholder:"邮箱"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1):e._e(),a("a-row",{attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",attrs:{span:16}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"blur"}],expression:"['code', {rules: [{ required: true, message: '请输入验证码' }], validateTrigger: 'blur'}]"}],attrs:{size:"large",type:"text",placeholder:"验证码"}})],1)],1),a("a-col",{staticClass:"gutter-row",attrs:{span:8}},[a("a-button",{staticClass:"sendCodeBtn",attrs:{size:"large",disabled:e.smsSendBtnState},domProps:{textContent:e._s(e.smsSendBtnState?e.time+" s":"获取验证码")},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.getCode(t)}}})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{validateFirst:!0,rules:[{required:!0,message:"请输入密码"},{pattern:/^[\w]{6,10}$/,message:"密码格式 必须位 6-15位数字或字母"},{validator:e.handlePassword}],validateTrigger:"blur"}],expression:"['password',{validateFirst: true, rules: [{ required: true, message: '请输入密码' },\n                                                               {pattern: /^[\\w]{6,10}$/, message: '密码格式 必须位 6-15位数字或字母'},\n                                                               {validator: handlePassword}\n        ], validateTrigger: 'blur'} ]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"新密码"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmPassword",{validateFirst:!0,rules:[{required:!0,message:"请输入确认密码"},{pattern:/^[\w]{6,10}$/,message:"密码格式 必须位 6-15位数字或字母"},{validator:e.handleConfirmPassword}],validateTrigger:"blur"}],expression:"['confirmPassword',{validateFirst: true, rules: [{ required: true, message: '请输入确认密码' },\n                                                                      {pattern: /^[\\w]{6,10}$/, message: '密码格式 必须位 6-15位数字或字母'},\n                                                                      {validator: handleConfirmPassword}], validateTrigger: 'blur'} ]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"确认密码"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",{staticStyle:{"margin-top":"24px"}},[a("a-button",{staticClass:"yesBtn",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.resetBtnState,disabled:e.resetBtnState}},[e._v("确定")])],1)],1)],1)},s=[],i=(a("d3b7"),a("5723")),o={name:"ResetPwd",data:function(){return{form:this.$form.createForm(this),errorMsg:"",type:"phone",resetBtnState:!1,time:60,smsSendBtnState:!1}},created:function(){},methods:{handlePassword:function(e,t,a){var r=this.form.getFieldValue("confirmPassword");r&&r!==t?a(new Error("密码和确认密码不一致")):a()},handleConfirmPassword:function(e,t,a){var r=this.form.getFieldValue("password");r&&r!==t?a(new Error("确认密码和密码输入不一致")):a()},getCode:function(e){var t=this;e.preventDefault(),this.form.validateFields(["phone","email"],{force:!0},(function(e,a){if(!e){t.smsSendBtnState=!0;var r,s=window.setInterval((function(){t.time--<=0&&(t.time=60,t.smsSendBtnState=!1,window.clearInterval(s))}),1e3);"email"===t.type?r=Object(i["f"])(a.email):"phone"===t.type&&(r=Object(i["g"])(a.phone)),r.then((function(e){e.status||(clearInterval(s),t.time=60,t.smsSendBtnState=!1)})).catch((function(e){clearInterval(s),t.time=60,t.smsSendBtnState=!1}))}}))},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields;a({force:!0},(function(e,a){if(!e){t.resetBtnState=!0;var r={};r.account="email"===t.type?a.email:a.phone,r.password=a.password,r.code=a.code,Object(i["e"])(r).then((function(e){e.status&&setTimeout((function(){t.$router.push({name:"Login"})}),2e3)})).finally((function(){t.resetBtnState=!1}))}}))}}},n=o,l=(a("28b0"),a("2877")),d=Object(l["a"])(n,r,s,!1,null,"9a58eb36",null);t["default"]=d.exports}}]);