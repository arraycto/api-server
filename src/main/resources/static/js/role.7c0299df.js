(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["role"],{"0187":function(t,e,a){"use strict";a.d(e,"e",(function(){return n})),a.d(e,"a",(function(){return i})),a.d(e,"j",(function(){return s})),a.d(e,"h",(function(){return c})),a.d(e,"i",(function(){return l})),a.d(e,"d",(function(){return d})),a.d(e,"g",(function(){return u})),a.d(e,"f",(function(){return m})),a.d(e,"b",(function(){return f})),a.d(e,"c",(function(){return h}));a("99af");var o=a("b775"),r={list:"/sys/role/list",add:"/sys/role/add",update:"/sys/role/update",remove:"/sys/role/remove",toggleState:"/sys/role/toggle-state",detail:"/sys/role/detail",listNoResources:"/sys/role/list-no-resources",listHaveResources:"/sys/role/list-have-resources",addRoleResources:"/sys/role/add-role-resources",delRoleResources:"/sys/role/del-role-resources"};function n(t){return Object(o["b"])({url:r.list,method:"post",data:t})}function i(t){return Object(o["b"])({url:r.add,method:"post",data:t})}function s(t,e){return Object(o["b"])({url:"".concat(r.update,"/").concat(t),method:"post",data:e})}function c(t){return Object(o["b"])({url:"".concat(r.remove,"/").concat(t),method:"get"})}function l(t){return Object(o["b"])({url:"".concat(r.toggleState,"/").concat(t),method:"get"})}function d(t){return Object(o["b"])({url:"".concat(r.detail,"/").concat(t),method:"get"})}function u(t,e){return Object(o["b"])({url:"".concat(r.listNoResources,"/").concat(t),method:"post",data:e})}function m(t,e){return Object(o["b"])({url:"".concat(r.listHaveResources,"/").concat(t),method:"post",data:e})}function f(t,e){return Object(o["b"])({url:"".concat(r.addRoleResources,"/").concat(t),method:"post",data:e})}function h(t,e){return Object(o["b"])({url:"".concat(r.delRoleResources,"/").concat(t),method:"post",data:e})}},4042:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return i}));a("d81d"),a("b64b"),a("498a");function o(t){return""===t||""===t.trim()||void 0===t||null===t}function r(t){return!o(t)}function n(t){var e={};for(var a in t)r(t[a])&&(e[a]=t[a]);return e}var i=function(){return{title:"",mode:"",visible:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:19}}},confirmLoading:!1,form:{}}}},"7ad5":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["Role"===t.$route.name?a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"名称"}},[a("a-input",{attrs:{placeholder:"请输入角色名称"},model:{value:t.query.search_LIKE_name,callback:function(e){t.$set(t.query,"search_LIKE_name",e)},expression:"query.search_LIKE_name"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"编码"}},[a("a-input",{attrs:{placeholder:"请输入角色编码"},model:{value:t.query.search_LIKE_id,callback:function(e){t.$set(t.query,"search_LIKE_id",e)},expression:"query.search_LIKE_id"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.handleSearch}},[t._v(" 查询")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator"},[a("a-button",{directives:[{name:"action",rawName:"v-action:sysRole:add",arg:"sysRole:add"}],attrs:{type:"primary",icon:"plus"},on:{click:t.handleAdd}},[t._v("新增")])],1),a("a-table",{attrs:{bordered:!1,columns:t.columns,loading:t.loading,dataSource:t.data,pagination:t.pagination,rowKey:function(t){return t.id}},on:{change:t.handleChange},scopedSlots:t._u([{key:"state",fn:function(t){return[a("a-badge","ON"===t?{attrs:{status:"success"}}:{attrs:{status:"error"}})]}},{key:"action",fn:function(e){return[a("div",{staticClass:"editable-row-operations"},[a("a-tooltip",{directives:[{name:"action",rawName:"v-action:sysRole:toggle",arg:"sysRole:toggle"}],attrs:{title:"ON"===e.state?"启用":"禁用"}},[a("a-switch",{attrs:{size:t.rowBtnSize,checked:"ON"===e.state},on:{change:function(a){return t.toggleState(e)}}})],1),a("a-button",{directives:[{name:"action",rawName:"v-action:sysRole:update",arg:"sysRole:update"}],staticClass:"rowBtn",attrs:{type:"link",size:t.rowBtnSize},on:{click:function(a){return t.handleEdit(e)}}},[t._v("编辑")]),a("a-button",{directives:[{name:"action",rawName:"v-action:sysRole:configResources",arg:"sysRole:configResources"}],staticClass:"rowBtn",attrs:{type:"link",size:t.rowBtnSize},on:{click:function(a){return t.handleConfigResources(e.id)}}},[t._v("配置资源")]),a("a-popconfirm",{directives:[{name:"action",rawName:"v-action:sysRole:remove",arg:"sysRole:remove"}],attrs:{placement:"top",title:"你确定要删除这条数据吗?",trigger:"hover",okText:"是",cancelText:"否"},on:{confirm:function(a){return t.handleRemove(e.id)}}},[a("a-button",{staticClass:"rowBtn",attrs:{type:"link",size:t.rowBtnSize}},[t._v("删除")])],1)],1)]}}],null,!1,3034447849)}),a("a-modal",{attrs:{visible:t.modal.visible,title:t.modal.title,confirmLoading:t.modal.confirmLoading},on:{cancel:t.handleModalCancel,ok:t.handleModalOk}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",t._b({attrs:{label:"角色名"}},"a-form-item",t.modal.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入角色名!"}]}],expression:"['name',{ rules: [{ required: true, message: '请输入角色名!' }]} ]"}]})],1),a("a-form-item",t._b({attrs:{label:"编码"}},"a-form-item",t.modal.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!0,message:"请输入角色编码!"}]}],expression:"['id',{ rules: [{ required: true, message: '请输入角色编码!' }]} ]"}],attrs:{disabled:"edit"===t.modal.mode}})],1),a("a-form-item",t._b({attrs:{label:"状态"}},"a-form-item",t.modal.formItemLayout,!1),[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["state",{rules:[{required:!0,message:"请选择状态!"}]}],expression:"['state',{ rules: [{ required: true, message: '请选择状态!' }]} ]"}]},[a("a-radio",{attrs:{value:"ON"}},[t._v("启用")]),a("a-radio",{attrs:{value:"OFF"}},[t._v("禁用")])],1)],1),a("a-form-item",t._b({attrs:{label:"简介"}},"a-form-item",t.modal.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["intro"],expression:"['intro']"}],attrs:{type:"textarea"}})],1)],1)],1)],1):t._e(),a("transition",{attrs:{name:"page-transition"}},[a("router-view")],1)],1)},r=[],n=(a("a4d3"),a("e01a"),a("4de4"),a("b0c0"),a("d3b7"),a("0187")),i=a("4042"),s={name:"Role",data:function(){return{description:"",form:this.$form.createForm(this),rowBtnSize:"small",loading:!1,columns:[{title:"状态",dataIndex:"state",align:"center",scopedSlots:{customRender:"state"}},{title:"角色名",dataIndex:"name"},{title:"角色编码",dataIndex:"id"},{title:"介绍",dataIndex:"intro"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],data:[],query:{search_LIKE_name:"",search_LIKE_id:""},pagination:{showSizeChanger:!0,total:0,current:1,pageSize:10},modal:Object(i["a"])()}},created:function(){this.loadData()},computed:{filter:function(){return Object(i["b"])(this.query)}},watch:{$route:function(t,e){"RoleConfigResources"===t.name&&(this.description="左侧为 角色 ".concat(t.params.roleId," 未拥有资源，右侧为已拥有资源")),"User"===t.name&&(this.description="")}},methods:{loadData:function(){var t=this;this.loading=!0;var e={filter:this.filter,current:this.pagination.current,pageSize:this.pagination.pageSize};Object(n["e"])(e).then((function(e){t.data=e.data.records,t.pagination.current=e.data.current,t.pagination.total=e.data.total,t.pagination.pageSize=e.data.pageSize})).finally((function(){t.loading=!1}))},handleSearch:function(){this.pagination.current=1,this.pagination.total=0,this.loadData()},handleChange:function(t){this.pagination=t,this.loadData()},toggleState:function(t){var e=this;Object(n["i"])(t.id).then((function(t){t.status&&e.loadData()}))},handleAdd:function(){var t=this;this.modal.title="新增角色",this.modal.mode="add",this.modal.visible=!0,this.$nextTick((function(){t.form.setFieldsValue({state:"ON"})}))},handleEdit:function(t){var e=this;this.modal.title="编辑角色",this.modal.mode="edit",this.modal.visible=!0,this.$nextTick((function(){e.form.setFieldsValue({id:t.id,name:t.name,state:t.state,intro:t.intro})}))},handleConfigResources:function(t){this.$router.push({name:"RoleConfigResources",params:{roleId:t}})},handleRemove:function(t){var e=this;Object(n["h"])(t).then((function(t){t.status&&e.loadData()}))},handleModalOk:function(){var t=this;this.form.validateFields((function(e,a){e||(t.modal.confirmLoading=!0,"add"===t.modal.mode?Object(n["a"])(a).then(t.handleModalOkResult):"edit"===t.modal.mode&&Object(n["j"])(a.id,a).then(t.handleModalOkResult))}))},handleModalOkResult:function(t){this.modal.confirmLoading=!1,t.status&&(this.modal.visible=!1,this.form.resetFields(),this.loadData())},handleModalCancel:function(){this.form.resetFields(),this.modal.visible=!1}}},c=s,l=a("2877"),d=Object(l["a"])(c,o,r,!1,null,null,null);e["default"]=d.exports}}]);